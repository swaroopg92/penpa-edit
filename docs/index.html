<!DOCTYPE html>
<html lang="en">

<head>
    <!-- HTML Meta Tags -->
    <title>Penpa+</title>
    <meta name="description" content="Web application to create and solve Sudokus and Puzzles.">
    <!-- Facebook Meta Tags -->
    <meta property="og:url" content="https://swaroopg92.github.io/penpa-edit/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Penpa+">
    <meta property="og:description" content="Web application to create and solve Sudokus and Puzzles.">
    <meta property="og:image" content="https://github.com/swaroopg92/penpa-edit/blob/master/docs/css/images/logo.png">
    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="swaroopg92.github.io">
    <meta property="twitter:url" content="https://swaroopg92.github.io/penpa-edit/">
    <meta name="twitter:title" content="Penpa+">
    <meta name="twitter:description" content="Web application to create and solve Sudokus and Puzzles.">
    <meta name="twitter:image" content="https://github.com/swaroopg92/penpa-edit/blob/master/docs/css/images/logo.png">
    <!-- HTML other tags -->
    <meta charset="utf-8" />
    <meta name="robots" content="nofollow" />
    <meta name="viewport" content="width=device-width" />
    <meta name="keywords" content="grid editor, pencil puzzle editor, logic puzzle solving, sudoku editor">
    <!-- Favicon -->
    <link rel="shortcut icon" href="./css/images/logo.png" />
    <link rel="apple-touch-icon" href="./css/images/logo.png" />
    <!-- Google Tag Manager -->
    <script>
        (function(w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({
                'gtm.start': new Date().getTime(),
                event: 'gtm.js'
            });
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s),
                dl = l != 'dataLayer' ? '&l=' + l : '';
            j.async = true;
            j.src =
                'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-TSBMV8L8');
    </script>
    <!-- End Google Tag Manager -->
    <!-- STYLES -->
    <!-- Online styles -->
    <link href="./css/font-awesome.min.css" rel="stylesheet">
    <!-- Local styles -->
    <script>
        var ver = "3.1.3"; // Also defined in class_p.js
        let style_sources = [
            "./css/light_theme.css",
            "./css/base-structure.css",
            "./css/vanillaSelectBox.css",
            "./css/spectrum.css",
            "./css/select2.css"
        ];
        let style_sources_ids = [
            "color_theme",
            "base_structure",
            "tab_setting_css",
            "custom_color_css",
            "constraints_settings_css"
        ];
        const style_tag_cache = [];
        for (let i = 0; i < style_sources.length; i++) {
            let style = document.createElement('link');
            style.rel = "stylesheet";
            style.type = "text/css";
            style.id = style_sources_ids[i];
            style.href = style_sources[i] + "?v=" + ver;
            style.async = false;
            document.head.appendChild(style);
            style_tag_cache[style_sources_ids[i]] = style;
        }
    </script>
    <!-- SCRIPTS -->
    <!-- local libs -->
    <script type="text/javascript">
        let library_sources = ["./js/libs/jquery-3.7.0.min.js",
            "./js/libs/purify.min.js",
            "./js/libs/CanvasRenderingContext2D.ext.js",
            "./js/libs/encoding.js",
            "./js/libs/vanillaSelectBox.js",
            "./js/libs/zlib.js",
            "./js/libs/spectrum.js",
            "./js/libs/canvas2svg.js",
            "./js/libs/select2.full.js",
            "./js/libs/gif.js",
            "./js/libs/sweetalert2@11",
            "./js/libs/md5.min.js",
        ];
        for (let i = 0; i < library_sources.length; i++) {
            let script = document.createElement("script");
            script.type = "text/javascript";
            script.src = library_sources[i] + "?v=" + ver;
            script.async = false;
            document.head.appendChild(script);
        }
    </script>
    <!--  rest -->
    <script type="text/javascript">
        let script_sources = [
            "./identity.js",
            "./js/settings.js",
            "./js/interface.js",
            "./js/conflicts.js",
            "./js/puzzlink.js",
            "./js/modes.js",
            "./js/genre_tags.js",
            "./js/constraints.js",
            "./js/main.js",
            "./js/class_p.js",
            "./js/class_square.js",
            "./js/class_hex.js",
            "./js/class_tri.js",
            "./js/class_pyramid.js",
            "./js/class_uniform.js",
            "./js/class_panel.js",
            "./js/style.js",
            "./js/general.js",
            "./js/customcolor.js"
        ];
        for (let i = 0; i < script_sources.length; i++) {
            let script = document.createElement("script");
            script.type = "text/javascript";
            script.src = script_sources[i] + "?v=" + ver;
            script.async = false;
            document.head.appendChild(script);
        }
    </script>
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TSBMV8L8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <header id="header">
        <span id="title">Setter Mode</span>
        <span id="version-info">Penpa+ v<span id="version-number"></span> &copy; 2020-2024 <button id="page_help">Help</button></span>
    </header>
    <div id="app-container">
        <div id="tool-container">
            <div id="tool-holder">
                <div id="top_button">
                    <button id="newboard">New Grid / Update</button>
                    <button id="rotation">Transform</button>
                    <button id="newsize" style="display:none;">Resize</button>
                    <button id="saveimage">Screenshot</button>
                    <button id="savetext">Share</button>
                    <a id="download_link"></a>
                    <button id="duplicate" onclick="duplicate();">Clone</button>
                    <button id="edit_bg_image">Edit Background</button>
                    <button id="input_sudoku">I/O Sudoku</button>
                    <button id="input_url">Load</button>
                    <button id="page_settings">Settings</button>
                </div>
                <div id="buttons">
                    <div id="edit_button" class="mode_button">
                        <label class="label_mode" id="edit_txt">Edit:</label>
                        <input type="radio" name="mode_qa" id="pu_q" value=1 checked="checked" />
                        <label for="pu_q" class="label" id="pu_q_label">Problem</label>
                        <input type="radio" name="mode_qa" id="pu_a" value=2 />
                        <label for="pu_a" class="label" id="pu_a_label">Solution</label>
                        <label class="label_mode" id="constraints">Constraints (Beta):</label>
                        <select name="constraints_settings" id="constraints_settings_opt"> </select>
                        <span id="visibility_button0" class="label_mode">Visibility:</span>
                        <span id="visibility_button" class="label toggle_btn">ON</span>
                        <br id="visibility_break">
                        <span id="edge_button0" class="label_mode">Draw on Edges:</span>
                        <span id="edge_button" class="label toggle_btn">OFF</span>
                        <span id="quick_panel_toggle_label" class="label_mode">Panel:</span>
                        <span id="quick_panel_toggle" class="label toggle_btn">OFF</span>
                    </div>
                    <div id="mode_button" class="mode_button">
                        <label class="label_mode" id="mode_txt">Mode:</label>
                        <input type="radio" name="mode" id="mo_surface" checked="checked" />
                        <label for="mo_surface" class="label" id="mo_surface_lb">Surface</label>
                        <input type="radio" name="mode" id="mo_multicolor" />
                        <label for="mo_multicolor" class="label" id="mo_multicolor_lb">Multicolor</label>
                        <input type="radio" name="mode" id="mo_line" />
                        <label for="mo_line" class="label" id="mo_line_lb">Line</label>
                        <input type="radio" name="mode" id="mo_lineE" />
                        <label for="mo_lineE" class="label" id="mo_lineE_lb">Edge</label>
                        <input type="radio" name="mode" id="mo_wall" />
                        <label for="mo_wall" class="label" id="mo_wall_lb">Wall</label>
                        <input type="radio" name="mode" id="mo_cage" />
                        <label for="mo_cage" class="label" id="mo_cage_lb">Cage</label>
                        <input type="radio" name="mode" id="mo_board" />
                        <label for="mo_board" class="label" id="mo_board_lb">Box</label>
                        <input type="radio" name="mode" id="mo_move" />
                        <label for="mo_move" class="label" id="mo_move_lb">Move</label>
                        <br id="mode_break">
                        <label class="label_mode" id="mode_txt_space">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                        <input type="radio" name="mode" id="mo_number" />
                        <label for="mo_number" class="label" id="mo_number_lb">Number</label>
                        <input type="radio" name="mode" id="mo_sudoku" />
                        <label for="mo_sudoku" class="label" id="mo_sudoku_lb">Sudoku</label>
                        <input type="radio" name="mode" id="mo_symbol" />
                        <label for="mo_symbol" class="label" id="mo_symbol_lb">Shape</label>
                        <input type="radio" name="mode" id="mo_special" />
                        <label for="mo_special" class="label" id="mo_special_lb">Special</label>
                        <input type="radio" name="mode" id="mo_combi" />
                        <label for="mo_combi" class="label" id="mo_combi_lb">Composite</label>
                        <span class="tab" id="tab_selection">
                            <select id="mode_choices" multiple size="0"></select>
                        </span>
                        <!-- <button id="toggle_panel_visibility" onclick="panel_toggle();">👁️</button> -->
                    </div>
                    <hr size="1" noshade>
                    <div id="submode_button">
                        <span id="div_sub">
                            <label class="label_mode tooltip" id="sub_txt">Sub:&nbsp;&nbsp;<span id="sub_text" class="tooltiptext">Choose one sub-mode wherever applicable</span></label>
                        </span>
                        <span id="mode_line" style="display:none;">
                            <input type="radio" name="mode_line" value="1" id="sub_line1" checked="checked">
                            <label for="sub_line1" class="labelL" id="sub_line1_lb">Normal</label>
                            <input type="radio" name="mode_line" value="2" id="sub_line2">
                            <label for="sub_line2" class="labelL" id="sub_line2_lb">Diagonal</label>
                            <input type="radio" name="mode_line" value="3" id="sub_line3">
                            <label for="sub_line3" class="labelL" id="sub_line3_lb">Free</label>
                            <input type="radio" name="mode_line" value="5" id="sub_line5">
                            <label for="sub_line5" class="labelL" id="sub_line5_lb">Middle</label>
                            <input type="radio" name="mode_line" value="4" id="sub_line4">
                            <label for="sub_line4" class="labelL" id="sub_line4_lb">Helper (x)</label>
                        </span>
                        <span id="mode_lineE" style="display:none;">
                            <input type="radio" name="mode_lineE" value="1" id="sub_lineE1" checked="checked">
                            <label for="sub_lineE1" class="labelL" id="sub_lineE1_lb">Normal</label>
                            <input type="radio" name="mode_lineE" value="2" id="sub_lineE2">
                            <label for="sub_lineE2" class="labelL" id="sub_lineE2_lb">Diagonal</label>
                            <input type="radio" name="mode_lineE" value="3" id="sub_lineE3">
                            <label for="sub_lineE3" class="labelL" id="sub_lineE3_lb">Free</label>
                            <input type="radio" name="mode_lineE" value="4" id="sub_lineE4">
                            <label for="sub_lineE4" class="labelL" id="sub_lineE4_lb">Helper (x)</label>
                            <input type="radio" name="mode_lineE" value="5" id="sub_lineE5">
                            <label for="sub_lineE5" class="labelL" id="sub_lineE5_lb">Erase</label>
                        </span>
                        <span id="mode_number" style="display:none;">
                            <input type="radio" name="mode_number" value="1" id="sub_number1" checked="checked">
                            <label for="sub_number1" class="labelL" id="sub_number1_lb">Normal</label>
                            <input type="radio" name="mode_number" value="10" id="sub_number10">
                            <label for="sub_number10" class="labelL" id="sub_number10_lb">L</label>
                            <input type="radio" name="mode_number" value="6" id="sub_number6">
                            <label for="sub_number6" class="labelL" id="sub_number6_lb">M</label>
                            <input type="radio" name="mode_number" value="5" id="sub_number5">
                            <label for="sub_number5" class="labelL" id="sub_number5_lb">S</label>
                            <input type="radio" name="mode_number" value="7" id="sub_number7">
                            <label for="sub_number7" class="labelL" id="sub_number7_lb">Candidates</label>
                            <input type="radio" name="mode_number" value="3" id="sub_number3">
                            <label for="sub_number3" class="labelL" id="sub_number3_lb"></label>
                            <input type="radio" name="mode_number" value="9" id="sub_number9">
                            <label for="sub_number9" class="labelL" id="sub_number9_lb"></label>
                            <input type="radio" name="mode_number" value="4" id="sub_number4">
                            <label for="sub_number4" class="labelL" id="sub_number4_lb">Tapa</label>
                            <input type="radio" name="mode_number" value="2" id="sub_number2">
                            <label for="sub_number2" class="labelL" id="sub_number2_lb">Arrow</label>
                            <input type="radio" name="mode_number" value="8" id="sub_number8">
                            <label for="sub_number8" class="labelL" id="sub_number8_lb">Long</label>
                            <input type="radio" name="mode_number" value="11" id="sub_number11">
                            <label for="sub_number11" class="labelL" id="sub_number11_lb">Killer</label>
                        </span>
                        <span id="mode_symbol" style="display:none;">
                            <ul class="nav">
                                <li><span id="ms1" class="labelS">Shape</span>
                                    <ul id="mode_symbolul1">
                                        <li id="li_circle"><span id="ms1_circle">&#x26AB; &#x26AA; &#x25CF; &#x25CB;</span>
                                            <ul>
                                                <li id="li_circle_L"><span id="ms_circle_L">L</span></li>
                                                <li id="li_circle_M"><span id="ms_circle_M">M</span></li>
                                                <li id="li_circle_S"><span id="ms_circle_S">S</span></li>
                                                <li id="li_circle_SS"><span id="ms_circle_SS">XS</span></li>
                                            </ul>
                                        </li>
                                        <li id="li_square"><span id="ms1_square">&#x2B1B; &#x2B1C; &#x25FC; &#x25FB;</span>
                                            <ul>
                                                <li id="li_square_LL"><span id="ms_square_LL">XL</span></li>
                                                <li id="li_square_L"><span id="ms_square_L">L</span></li>
                                                <li id="li_square_M"><span id="ms_square_M">M</span></li>
                                                <li id="li_square_S"><span id="ms_square_S">S</span></li>
                                                <li id="li_square_SS"><span id="ms_square_SS">XS</span></li>
                                            </ul>
                                        </li>
                                        <li id="li_triup"><span id="ms1_triup">&#x25B2; &#x25B3; &#x25B4; &#x25B5;</span>
                                            <ul>
                                                <li><span id="ms_triup_L">L</span></li>
                                                <li><span id="ms_triup_M">M</span></li>
                                                <li><span id="ms_triup_S">S</span></li>
                                                <li><span id="ms_triup_SS">XS</span></li>
                                            </ul>
                                        </li>
                                        <li id="li_tridown"><span id="ms1_tridown">&#x25BC; &#x25BD; &#x25BE; &#x25BF;</span>
                                            <ul>
                                                <li><span id="ms_tridown_L">L</span></li>
                                                <li><span id="ms_tridown_M">M</span></li>
                                                <li><span id="ms_tridown_S">S</span></li>
                                                <li><span id="ms_tridown_SS">XS</span></li>
                                            </ul>
                                        </li>
                                        <li id="li_triright"><span id="ms1_triright">&#9655; &#11208; &#9657; &#9656;</span>
                                            <ul>
                                                <li><span id="ms_triright_L">L</span></li>
                                                <li><span id="ms_triright_M">M</span></li>
                                                <li><span id="ms_triright_S">S</span></li>
                                                <li><span id="ms_triright_SS">XS</span></li>
                                            </ul>
                                        </li>
                                        <li id="li_trileft"><span id="ms1_trileft">&#9665; &#11207; &#9667; &#9666;</span>
                                            <ul>
                                                <li><span id="ms_trileft_L">L</span></li>
                                                <li><span id="ms_trileft_M">M</span></li>
                                                <li><span id="ms_trileft_S">S</span></li>
                                                <li><span id="ms_trileft_SS">XS</span></li>
                                            </ul>
                                        </li>
                                        <li id="li_diamond"><span id="ms1_diamond">&#x2B25; &#x2B26; &#x25C6; &#x25C7;</span>
                                            <ul>
                                                <li><span id="ms_diamond_L">L</span></li>
                                                <li><span id="ms_diamond_M">M</span></li>
                                                <li><span id="ms_diamond_S">S</span></li>
                                                <li><span id="ms_diamond_SS">XS</span></li>
                                            </ul>
                                        </li>
                                        <li id="li_hexpoint"><span id="ms1_hexpoint">Hexagon point</span>
                                            <ul>
                                                <li><span id="ms_hexpoint_LL">XL</span></li>
                                                <li><span id="ms_hexpoint_L">L</span></li>
                                                <li><span id="ms_hexpoint_M">M</span></li>
                                                <li><span id="ms_hexpoint_S">S</span></li>
                                                <li><span id="ms_hexpoint_SS">XS</span></li>
                                            </ul>
                                        </li>
                                        <li id="li_hexflat"><span id="ms1_hexflat">Hexagon flat</span>
                                            <ul>
                                                <li><span id="ms_hexflat_LL">XL</span></li>
                                                <li><span id="ms_hexflat_L">L</span></li>
                                                <li><span id="ms_hexflat_M">M</span></li>
                                                <li><span id="ms_hexflat_S">S</span></li>
                                                <li><span id="ms_hexflat_SS">XS</span></li>
                                            </ul>
                                        </li>
                                        <li id="li_ox"><span id="ms1_ox">○△□×</span>
                                            <ul>
                                                <li><span id="ms_ox_B">Black</span></li>
                                                <li><span id="ms_ox_E">Green</span></li>
                                                <li><span id="ms_ox_G">Gray</span></li>
                                            </ul>
                                        </li>
                                        <li id="li_cross"><span id="ms_cross">Cross</span></li>
                                        <li id="li_line"><span id="ms_line">Lines</span></li>
                                        <li id="li_frameline"><span id="ms_frameline">Cage Lines</span></li>
                                        <li id="li_bars"><span id="ms1_bars">Bars &#x25AE; &#x25AF;</span>
                                            <ul id="ul_bars">
                                                <li><span id="ms_bars_B">Black</span></li>
                                                <li><span id="ms_bars_G">Gray</span></li>
                                                <li><span id="ms_bars_W">White</span></li>
                                            </ul>
                                        </li>
                                        <li id="li_tri"><span id="ms_tri">&#x25E2; &#x25E3; &#x25E4; &#x25E5;</span></li>
                                    </ul>
                                </li>
                                <li><span id="ms2" class="labelS">Number</span>
                                    <ul id="mode_symbolul2">
                                        <li><span id="ms3_math">Math</span>
                                            <ul>
                                                <li><span id="ms_math">Black</span></li>
                                                <li><span id="ms_math_G">Green</span></li>
                                            </ul>
                                        </li>
                                        <li><span id="ms_inequality">&#xFF1C; &#xFF1E; ^ v </span></li>
                                        <li id=msli_degital><span id="ms1_degital">&brvbar;-&brvbar; &brvbar; '-&brvbar;</span>
                                            <ul id="ul_degital">
                                                <li><span id="ms_degital_B">Black</span></li>
                                                <li><span id="ms_degital_E">Green</span></li>
                                                <li><span id="ms_degital_G">Gray</span></li>
                                            </ul>
                                        </li>
                                        <li><span id="ms_degital_f">Digital Frame</span></li>
                                        <li><span id="ms_dice">⚀ ⚂ ⚅</span></li>
                                        <li><span id="ms_pills">Pills</span></li>
                                    </ul>
                                </li>
                                <li><span id="ms3" class="labelS">Arrow</span>
                                    <ul id="mode_symbolul3">
                                        <li id="li_arrow_B"><span id="ms3_arrow_B">Fat</span>
                                            <ul>
                                                <li><span id="ms_arrow_B_B">Black</span></li>
                                                <li><span id="ms_arrow_B_G">Grey</span></li>
                                                <li><span id="ms_arrow_B_W">White</span></li>
                                            </ul>
                                        </li>
                                        <li id="li_arrow_N"><span id="ms3_arrow_N">Thin</span>
                                            <ul>
                                                <li><span id="ms_arrow_N_B">Black</span></li>
                                                <li><span id="ms_arrow_N_G">Grey</span></li>
                                                <li><span id="ms_arrow_N_W">White</span></li>
                                            </ul>
                                        </li>
                                        <li id="li_arrow_tri"><span id="ms3_arrow_tri">Triangular</span>
                                            <ul>
                                                <li><span id="ms_arrow_tri_B">Black</span></li>
                                                <li><span id="ms_arrow_tri_G">Grey</span></li>
                                                <li><span id="ms_arrow_tri_W">White</span></li>
                                            </ul>
                                        </li>
                                        <li id="li_arrow_fouredge"><span id="ms3_arrow_fouredge">Four edge</span>
                                            <ul>
                                                <li><span id="ms_arrow_fouredge_B">Black</span></li>
                                                <li><span id="ms_arrow_fouredge_G">Grey</span></li>
                                                <li><span id="ms_arrow_fouredge_E">Green</span></li>
                                            </ul>
                                        </li>
                                        <li id="li_arrow_GP"><span id="ms3_arrow_GP">GP</span>
                                            <ul>
                                                <li><span id="ms_arrow_GP">Normal</span></li>
                                                <li><span id="ms_arrow_GP_C">With circle</span></li>
                                            </ul>
                                        </li>
                                        <li id="li_arrow_Short"><span id="ms_arrow_Short">Short and fat</span></li>
                                        <li id="li_arrow_S"><span id="ms_arrow_S">Small</span></li>
                                        <li id="li_arrow_cross"><span id="ms_arrow_cross">Cross</span></li>
                                        <li id="li_arrow_eight"><span id="ms_arrow_eight">8-way</span></li>
                                        <li id="li_arrow_fourtip"><span id="ms_arrow_fourtip">Arrow tips</span></li>
                                    </ul>
                                </li>
                                <li><span id="ms4" class="labelS">Special 1</span>
                                    <ul id="mode_symbolul4">
                                        <li id="li_battleship"><span id="ms4_battleship">Battleship</span>
                                            <ul>
                                                <li><span id="ms_battleship_B">Black</span></li>
                                                <li><span id="ms_battleship_G">Grey</span></li>
                                                <li><span id="ms_battleship_W">White</span></li>
                                                <li><span id="ms_battleship_B+">Curvy Black</span></li>
                                                <li><span id="ms_battleship_G+">Curvy Grey</span></li>
                                                <li><span id="ms_battleship_W+">Curvy White</span></li>
                                            </ul>
                                        </li>
                                        <li id="li_kakuro"><span id="ms_kakuro">Kakuro</span></li>
                                        <li id="li_tents"><span id="ms_tents">&#127794; &#9650; &#8779; &#128031;</span></li>
                                        <li id="li_star"><span id="ms_star">&#10022; &#9734; &#9733;</span></li>
                                        <li id="li_compass"><span id="ms_compass">Compass</span></li>
                                        <li id="li_sudokuetc"><span id="ms_sudokuetc">Sudoku</span></li>
                                        <li id="li_sudokumore"><span id="ms_sudokumore">ArrowSums</span></li>
                                        <li id="li_polyomino"><span id="ms_polyomino">Polyomino</span></li>
                                        <li id="li_polyhex"><span id="ms_polyhex">Polyhex</span></li>
                                    </ul>
                                </li>
                                <li><span id="ms5" class="labelS">Special 2</span>
                                    <ul id="mode_symbolul5">
                                        <li><span id="ms_angleloop">Angle Loop</span></li>
                                        <li><span id="ms_firefly">Firefly</span></li>
                                        <li><span id="ms_sun_moon">☼ 🌙 💡 💣</span></li>
                                        <li><span id="ms_pencils">Pencils</span></li>
                                        <li><span id="ms_slovak">Slovak Sums</span></li>
                                        <li><span id="ms_arc">Arc</span></li>
                                        <li><span id="ms_darts">Darts</span></li>
                                        <li><span id="ms_spans">Spans</span></li>
                                        <li><span id="ms_neighbors">Neighbors</span></li>
                                    </ul>
                                </li>
                            </ul>
                        </span>
                        <span id="mode_special" style="display:none;">
                            <input type="radio" name="mode_special" value="thermo" id="sub_specialthermo" checked="checked">
                            <label for="sub_specialthermo" class="labelL" id="sub_specialthermo_lb">Thermo</label>
                            <input type="radio" name="mode_special" value="nobulbthermo" id="sub_specialnobulbthermo">
                            <label for="sub_specialnobulbthermo" class="labelL" id="sub_specialnobulbthermo_lb">No Bulb Thermo</label>
                            <input type="radio" name="mode_special" value="arrows" id="sub_specialarrows">
                            <label for="sub_specialarrows" class="labelL" id="sub_specialarrows_lb">Sudoku Arrow</label>
                            <input type="radio" name="mode_special" value="direction" id="sub_specialdirection">
                            <label for="sub_specialdirection" class="labelL" id="sub_specialdirection_lb">Arrow</label>
                            <input type="radio" name="mode_special" value="squareframe" id="sub_specialsquareframe">
                            <label for="sub_specialsquareframe" class="labelL" id="sub_specialsquareframe_lb">Rectangle frame</label>
                            <input type="radio" name="mode_special" value="polygon" id="sub_specialpolygon">
                            <label for="sub_specialpolygon" class="labelL" id="sub_specialpolygon_lb">Polygon</label>
                        </span>
                        <span id="mode_cage" style="display:none;">
                            <input type="radio" name="mode_cage" value="1" id="sub_cage1" checked="checked">
                            <label for="sub_cage1" class="labelL" id="sub_cage1_lb">Killer</label>
                            <input type="radio" name="mode_cage" value="2" id="sub_cage2">
                            <label for="sub_cage2" class="labelL" id="sub_cage2_lb">Free</label>
                        </span>
                        <span id="mode_move" style="display:none;">
                            <input type="radio" name="mode_move" value="1" id="sub_move1" checked="checked">
                            <label for="sub_move1" class="labelL" id="sub_move1_lb">All</label>
                            <input type="radio" name="mode_move" value="2" id="sub_move2">
                            <label for="sub_move2" class="labelL" id="sub_move2_lb">Numbers</label>
                            <input type="radio" name="mode_move" value="3" id="sub_move3">
                            <label for="sub_move3" class="labelL" id="sub_move3_lb">Shapes</label>
                        </span>
                        <span id="mode_combi" style="display:none;">
                            <ul class="nav">
                                <li><span id="subc1" class="labelS">Paint</span>
                                    <ul>
                                        <li><span id="combisub_blpo">Black / dot</span></li>
                                        <li><span id="combisub_blwh">Yin-Yang</span></li>
                                        <li id="combili_shaka"><span id="combisub_shaka">Shakashaka</span></li>
                                    </ul>
                                </li>
                                <li><span id="subc2" class="labelS">Loop</span>
                                    <ul>
                                        <li id="li_linex"><span id="combisub_linex">Line x</span></li>
                                        <li id="li_lineox"><span id="combisub_lineox">Line OX</span></li>
                                        <li id="li_linedir"><span id="combisub_linedir">Line x&lt;&gt;</span></li>
                                        <li id="li_edgex"><span id="combisub_edgex">Edge x</span></li>
                                        <li id="li_edgexoi"><span id="combisub_edgexoi">Edge IO</span></li>
                                        <li id="li_yajilin"><span id="combisub_yajilin">Yajilin</span></li>
                                        <li id="li_hashi"><span id="combisub_hashi">Hashi</span></li>
                                        <li id="li_rassisillai"><span id="combisub_rassisillai">RassiSillai</span></li>
                                    </ul>
                                </li>
                                <li><span id="subc3" class="labelS">Area / Field</span>
                                    <ul>
                                        <li><span id="combisub_edgesub">Edge/Aux line</span></li>
                                    </ul>
                                </li>
                                <li><span id="subc4" class="labelS">Object</span>
                                    <ul>
                                        <li id="combili_battleship"><span id="combisub_battleship">Battleship</span></li>
                                        <li id="combili_star"><span id="combisub_star">Star Battle</span></li>
                                        <li id="combili_tents"><span id="combisub_tents">Tent</span></li>
                                        <li id="combili_magnets"><span id="combisub_magnets">Magnets</span></li>
                                        <li id="combili_mines"><span id="combisub_mines">Minesweeper</span></li>
                                        <li id="combili_akari"><span id="combisub_akari">Akari</span></li>
                                        <li id="combili_arrowS"><span id="combisub_arrowS">Arrows</span></li>
                                        <li id="combili_doublemines"><span id="combisub_doublemines">DoubleMines</span></li>
                                    </ul>
                                </li>
                                <li><span id="subc5" class="labelS">Number logic</span>
                                    <ul>
                                        <li><span id="combisub_numfl">Number flick</span></li>
                                        <li><span id="combisub_alfl">Alphabet flick</span></li>
                                    </ul>
                                </li>
                            </ul>
                        </span>
                        <span id="mode_sudoku" style="display:none;">
                            <input type="radio" name="mode_sudoku" value="1" id="sub_sudoku1" checked="checked">
                            <label for="sub_sudoku1" class="labelSu" id="sub_sudoku1_lb">Normal</label>
                            <input type="radio" name="mode_sudoku" value="2" id="sub_sudoku2">
                            <label for="sub_sudoku2" class="labelSu" id="sub_sudoku2_lb">Corner</label>
                            <input type="radio" name="mode_sudoku" value="3" id="sub_sudoku3">
                            <label for="sub_sudoku3" class="labelSu" id="sub_sudoku3_lb">Centre</label>
                        </span>
                    </div>
                    <div id="style_combi" style="display:none;">
                        <span class="combimode_display">
                            <span id="panel_buttonc0" class="label">Selection:</span>
                            <b><span id="combimode_content" class="combimode_content">blpo</span></b>
                        </span>
                    </div>
                    <div id="stylemode_button">
                        <span>
                            <label class="label_mode tooltip" id="style_txt">Style:<span id="style_text" class="tooltiptext">Choose one style</span></label>
                        </span>
                        <span id="style_surface" style="display:'inline-block';">
                            <!-- Adding superscript was affecting the color selection as it did not had id, so defined new id and followed same structure as parent. Its important to have only two characters at the end after _ because of the way, window_click is setup in main.js for stylemode_check-->
                            <input type="radio" name="style_surface" value="1" id="st_surface1" checked="checked">
                            <label for="st_surface1" class="labelL" id="st_surface1_lb">DG<sup id="st_surface1_sp">1</sup></label>
                            <input type="radio" name="style_surface" value="8" id="st_surface8">
                            <label for="st_surface8" class="labelL" id="st_surface8_lb">GR<sup id="st_surface8_sp">2</sup></label>
                            <input type="radio" name="style_surface" value="3" id="st_surface3">
                            <label for="st_surface3" class="labelL" id="st_surface3_lb">LG<sup id="st_surface3_sp">3</sup></label>
                            <input type="radio" name="style_surface" value="4" id="st_surface4">
                            <label for="st_surface4" class="labelL" id="st_surface4_lb">BK<sup id="st_surface4_sp">4</sup></label>
                            <input type="radio" name="style_surface" value="2" id="st_surface2">
                            <label for="st_surface2" class="labelL" id="st_surface2_lb">GN<sup id="st_surface2_sp">5</sup></label>
                            <input type="radio" name="style_surface" value="5" id="st_surface5">
                            <label for="st_surface5" class="labelL" id="st_surface5_lb">BL<sup id="st_surface5_sp">6</sup></label>
                            <input type="radio" name="style_surface" value="6" id="st_surface6">
                            <label for="st_surface6" class="labelL" id="st_surface6_lb">RE<sup id="st_surface6_sp">7</sup></label>
                            <input type="radio" name="style_surface" value="7" id="st_surface7">
                            <label for="st_surface7" class="labelL" id="st_surface7_lb">YE<sup id="st_surface7_sp">8</sup></label>
                            <input type="radio" name="style_surface" value="9" id="st_surface9">
                            <label for="st_surface9" class="labelL" id="st_surface9_lb">PI<sup id="st_surface9_sp">9</sup></label>
                            <input type="radio" name="style_surface" value="10" id="st_surface10">
                            <label for="st_surface10" class="labelL" id="st_surface10_lb">OR<sup id="st_surface10_sp">0</sup></label>
                            <input type="radio" name="style_surface" value="11" id="st_surface11">
                            <label for="st_surface11" class="labelL" id="st_surface11_lb">PU<sup id="st_surface11_sp">11</sup></label>
                            <input type="radio" name="style_surface" value="12" id="st_surface12">
                            <label for="st_surface12" class="labelL" id="st_surface12_lb">BR<sup id="st_surface12_sp">12</sup></label>
                        </span>
                        <span id="style_line" style="display:none;">
                            <input type="radio" name="style_line" value="3" id="st_line3" checked="checked">
                            <label for="st_line3" class="labelL" id="st_line3_lb">G</label>
                            <input type="radio" name="style_line" value="2" id="st_line2">
                            <label for="st_line2" class="labelL" id="st_line2_lb">B</label>
                            <input type="radio" name="style_line" value="5" id="st_line5">
                            <label for="st_line5" class="labelL" id="st_line5_lb">G</label>
                            <input type="radio" name="style_line" value="8" id="st_line8">
                            <label for="st_line8" class="labelL" id="st_line8_lb">R</label>
                            <input type="radio" name="style_line" value="9" id="st_line9">
                            <label for="st_line9" class="labelL" id="st_line9_lb">B</label>
                            <input type="radio" name="style_line" value="80" id="st_line80">
                            <label for="st_line80" class="labelL" id="st_line80_lb">Thin</label>
                            <input type="radio" name="style_line" value="12" id="st_line12">
                            <label for="st_line12" class="labelL" id="st_line12_lb">Dotted</label>
                            <input type="radio" name="style_line" value="13" id="st_line13">
                            <label for="st_line13" class="labelL" id="st_line13_lb">Fat dots</label>
                            <input type="radio" name="style_line" value="40" id="st_line40">
                            <label for="st_line40" class="labelL" id="st_line40_lb">Short</label>
                            <input type="radio" name="style_line" value="30" id="st_line30">
                            <label for="st_line30" class="labelL" id="st_line30_lb">Double</label>
                        </span>
                        <span id="style_lineE" style="display:none;">
                            <input type="radio" name="style_lineE" value="3" id="st_lineE3" checked="checked">
                            <label for="st_lineE3" class="labelL" id="st_lineE3_lb">G</label>
                            <input type="radio" name="style_lineE" value="2" id="st_lineE2">
                            <label for="st_lineE2" class="labelL" id="st_lineE2_lb">B</label>
                            <input type="radio" name="style_lineE" value="5" id="st_lineE5">
                            <label for="st_lineE5" class="labelL" id="st_lineE5_lb">G</label>
                            <input type="radio" name="style_lineE" value="8" id="st_lineE8">
                            <label for="st_lineE8" class="labelL" id="st_lineE8_lb">R</label>
                            <input type="radio" name="style_lineE" value="9" id="st_lineE9">
                            <label for="st_lineE9" class="labelL" id="st_lineE9_lb">B</label>
                            <input type="radio" name="style_lineE" value="21" id="st_lineE21">
                            <label for="st_lineE21" class="labelL" id="st_lineE21_lb">Thicker</label>
                            <input type="radio" name="style_lineE" value="80" id="st_lineE80">
                            <label for="st_lineE80" class="labelL" id="st_lineE80_lb">Thin</label>
                            <input type="radio" name="style_lineE" value="12" id="st_lineE12">
                            <label for="st_lineE12" class="labelL" id="st_lineE12_lb">Dotted</label>
                            <input type="radio" name="style_lineE" value="13" id="st_lineE13">
                            <label for="st_lineE13" class="labelL" id="st_lineE13_lb">Fat dots</label>
                            <input type="radio" name="style_lineE" value="30" id="st_lineE30">
                            <label for="st_lineE30" class="labelL" id="st_lineE30_lb">Double</label>
                        </span>
                        <span id="style_wall" style="display:none;">
                            <input type="radio" name="style_wall" value="3" id="st_wall3" checked="checked">
                            <label for="st_wall3" class="labelL" id="st_wall3_lb">G</label>
                            <input type="radio" name="style_wall" value="2" id="st_wall2">
                            <label for="st_wall2" class="labelL" id="st_wall2_lb">B</label>
                            <input type="radio" name="style_wall" value="5" id="st_wall5">
                            <label for="st_wall5" class="labelL" id="st_wall5_lb">G</label>
                            <input type="radio" name="style_wall" value="8" id="st_wall8">
                            <label for="st_wall8" class="labelL" id="st_wall8_lb">R</label>
                            <input type="radio" name="style_wall" value="9" id="st_wall9">
                            <label for="st_wall9" class="labelL" id="st_wall9_lb">B</label>
                            <input type="radio" name="style_wall" value="1" id="st_wall1">
                            <label for="st_wall1" class="labelL" id="st_wall1_lb">Thin</label>
                            <input type="radio" name="style_wall" value="12" id="st_wall12">
                            <label for="st_wall12" class="labelL" id="st_wall12_lb">Dotted</label>
                            <input type="radio" name="style_wall" value="17" id="st_wall17">
                            <label for="st_wall17" class="labelL" id="st_wall17_lb">Fat dots</label>
                            <input type="radio" name="style_wall" value="14" id="st_wall14">
                            <label for="st_wall14" class="labelL" id="st_wall14_lb">Grey dot</label>
                        </span>
                        <span id="style_number" style="display:none;">
                            <input type="radio" name="style_number" value="1" id="st_number1" checked="checked">
                            <label for="st_number1" class="labelL" id="st_number1_lb">B</label>
                            <input type="radio" name="style_number" value="2" id="st_number2">
                            <label for="st_number2" class="labelL" id="st_number2_lb">G</label>
                            <input type="radio" name="style_number" value="8" id="st_number8">
                            <label for="st_number8" class="labelL" id="st_number8_lb">B</label>
                            <input type="radio" name="style_number" value="3" id="st_number3">
                            <label for="st_number3" class="labelL" id="st_number3_lb">G</label>
                            <input type="radio" name="style_number" value="9" id="st_number9">
                            <label for="st_number9" class="labelL" id="st_number9_lb">B</label>
                            <input type="radio" name="style_number" value="10" id="st_number10">
                            <label for="st_number10" class="labelL" id="st_number10_lb">R</label>
                            <input type="radio" name="style_number" value="4" id="st_number4">
                            <label for="st_number4" class="labelL" id="st_number4_lb">W</label>
                            <input type="radio" name="style_number" value="0" id="st_number0">
                            <label for="st_number0" class="labelL" id="st_number0_lb"></label>
                            <input type="radio" name="style_number" value="6" id="st_number6">
                            <label for="st_number6" class="labelL" id="st_number6_lb"></label>
                            <input type="radio" name="style_number" value="7" id="st_number7">
                            <label for="st_number7" class="labelL" id="st_number7_lb"></label>
                            <input type="radio" name="style_number" value="11" id="st_number11">
                            <label for="st_number11" class="labelL" id="st_number11_lb"></label>
                            <input type="radio" name="style_number" value="5" id="st_number5">
                            <label for="st_number5" class="labelL" id="st_number5_lb">White BG</label>
                        </span>
                        <span id="style_symbol" style="display:none;">
                            <input type="radio" name="style_symbol" value="1" id="st_symbol1">
                            <label for="st_symbol1" class="label" id="st_symbol1_lb">Behind Lines</label>
                            <input type="radio" name="style_symbol" value="2" id="st_symbol2" checked="checked">
                            <label for="st_symbol2" class="label" id="st_symbol2_lb">In front of lines</label>
                            <span class="symbolmode_display">
                                <span id="panel_buttons0" class="label">Selection:</span>
                                <b><span id="symmode_content" class="symmode_content">circle_L</span></b>
                            </span>
                        </span>
                        <span id="style_cage" style="display:none;">
                            <input type="radio" name="style_cage" value="10" id="st_cage10" checked="checked">
                            <label for="st_cage10" class="labelL" id="st_cage10_lb">Dotted line</label>
                            <input type="radio" name="style_cage" value="7" id="st_cage7">
                            <label for="st_cage7" class="labelL" id="st_cage7_lb">Grey line</label>
                            <input type="radio" name="style_cage" value="15" id="st_cage15">
                            <label for="st_cage15" class="labelL" id="st_cage15_lb">Grey dots</label>
                            <input type="radio" name="style_cage" value="16" id="st_cage16">
                            <label for="st_cage16" class="labelL" id="st_cage16_lb">Solid line</label>
                        </span>
                        <span id="style_sudoku" style="display:none;">
                            <input type="radio" name="style_sudoku" value="1" id="st_sudoku1" checked="checked">
                            <label for="st_sudoku1" class="labelL" id="st_sudoku1_lb">B</label>
                            <input type="radio" name="style_sudoku" value="2" id="st_sudoku2">
                            <label for="st_sudoku2" class="labelL" id="st_sudoku2_lb">G</label>
                            <input type="radio" name="style_sudoku" value="8" id="st_sudoku8">
                            <label for="st_sudoku8" class="labelL" id="st_sudoku8_lb">B</label>
                            <input type="radio" name="style_sudoku" value="3" id="st_sudoku3">
                            <label for="st_sudoku3" class="labelL" id="st_sudoku3_lb">G</label>
                            <input type="radio" name="style_sudoku" value="9" id="st_sudoku9">
                            <label for="st_sudoku9" class="labelL" id="st_sudoku9_lb">B</label>
                            <input type="radio" name="style_sudoku" value="10" id="st_sudoku10">
                            <label for="st_sudoku10" class="labelL" id="st_sudoku10_lb">R</label>
                        </span>
                        <span id="style_special" style="display:none;">
                            <input type="text" name="style_special" id="colorpicker_special" />
                        </span>
                    </div>
                </div>
            </div>
            <div id="ruletext"></div>
        </div>
        <div id="puzzle-container">
            <div id="puzzleinfo">
                <label id="puzzletitle" class="info"></label>
                <label id="puzzleauthor" class="info"></label>
                <div><input type="button" id="puzzlerules" value="Show Rules" /></div>
                <div><a id="puzzlesourcelink" href="" target="_blank"><label id="puzzlesource" class="info"></label></a></div>
                <div><label id="solution_check" class="info" /></label></div>
            </div>
            <div id="dvique" class="dvique">
                <canvas id="pause_canvas" style="display:none;"></canvas>
            </div>
            <div id="contestinfo">
                <div><label id="answer_key" class="info" /></label>
                </div>
            </div>
            <div id="bottom_button">
                <span class="tooltip">
                    <button id="tb_undo" class="button" disabled>Undo</button>
                    <span id="undo_text" class="tooltiptext">CTRL + z</span>
                </span>
                <span class="tooltip">
                    <button id="tb_redo" class="button" disabled>Redo</button>
                    <span id="redo_text" class="tooltiptext">CTRL + y</span>
                </span>
                <span class="tooltip">
                    <button id="tb_reset" class="button">Erase selected mode</button>
                    <span id="eraseselect_text" class="tooltiptext">Erase elements that belongs to the selected mode</span>
                </span>
                <span class="tooltip">
                    <button id="tb_delete" class="button">Delete all</button>
                    <span id="erase_text" class="tooltiptext">Erase problem or solution grid</span>
                </span>
                <br>
            </div>
            <div id="stop_watch">
                <h1 id="timer" class="values">00:00:00:00:0</h1>
                <div>
                    <button id="sw_start" class="button sw">Start</button>
                    <button id="sw_pause" class="button sw">Pause</button>
                    <button id="sw_stop" class="button sw">Stop</button>
                    <button id="sw_reset" class="button sw">Reset</button>
                    <button id="sw_hide" class="button sw">Hide</button>
                </div>
            </div>
        </div>
    </div>
    <div id="float-key">
        <div class="drag-and-drop" id="float-key-header">
            <h4 id="float-key-header-lb">panel</h4>
            <button id="close-float-panel" onclick="panel_off();">&times;</button>
        </div>
        <div id="float-key-body">
            <div id="float-key-menu">
                <ul class="panel_menu">
                    <li id="panel_1_lbmenu"> 1</li>
                    <li id="panel_A_lbmenu">A</li>
                    <li id="panel_a_lbmenu">a</li>
                    <li id="panel_Text_lbmenu">Text</li>
                    <li id="panel_select_lbmenu">▶</li>
                </ul>
            </div>
            <div id="float-key-select" style="display:none;">
                <ul class="panel_menu_select">
                    <li id="panel_ja_K_lbmenu">ア</li>
                    <li id="panel_ja_H_lbmenu">あ</li>
                    <li id="panel_!_lbmenu">!</li>
                    <li id="panel_Kan_lbmenu">Kanji</li>
                    <li id="panel_Rome_lbmenu">XVI</li>
                    <li id="panel_Greek_lbmenu">α</li>
                    <li id="panel_europe_lbmenu">À</li>
                    <li id="panel_Cyrillic_lbmenu">Ж</li>
                    <li id="panel_Chess_lbmenu">♛</li>
                    <li id="panel_card_lbmenu">♠</li>
                </ul>
            </div>
            <div id="float-key-board">
                <canvas id="float-canvas" class="float-canvas"></canvas>
            </div>
            <div id="float-key-text">
                <textarea class="text_area" class="text_area" rows="1" cols="20" maxlength="100" id="inputtext"></textarea>
                <input type="button" id="closeBtn_input1" value="Insert" />
                <input type="button" id="closeBtn_input2" value="Clear" />
                <input type="button" id="closeBtn_input3" value="Load" />
            </div>
        </div>
    </div>
    <div id="modal" class="modal">
        <div id="modal-new-content" class="modal-content">
            <h3 class="modal-header">New Grid</h3>
            <span id="modal-grid">
                <h4><label class="label_nb" id="nb_gridtype_lb">Board type:</label></h4>
                <select id="gridtype" onchange="changetype()">
                    <option value="square" id="nb_gridtype1_lb" selected="selected">Square</option>
                    <option value="sudoku" id="nb_gridtype6_lb">Sudoku</option>
                    <option value="hex" id="nb_gridtype2_lb">Hexagon</option>
                    <option value="tri" id="nb_gridtype3_lb">Triangle</option>
                    <option value="pyramid" id="nb_gridtype4_lb">Pyramid</option>
                    <option value="iso" id="nb_gridtype5_lb">Cube</option>
                    <option value="kakuro" id="nb_gridtype7_lb">Kakuro</option>
                    <option value="tetrakis_square" id="nb_gridtype8_lb"> Tetrakis square </option>
                    <option value="truncated_square" id="nb_gridtype9_lb"> Truncated square </option>
                    <option value="snub_square" id="nb_gridtype10_lb"> Snub square </option>
                    <option value="cairo_pentagonal" id="nb_gridtype11_lb"> Cairo pentagonal </option>
                    <option value="rhombitrihexagonal" id="nb_gridtype12_lb"> Rhombitrihexagonal </option>
                    <option value="deltoidal_trihexagonal" id="nb_gridtype13_lb"> Deltoidal trihexagonal </option>
                </select>
            </span><br>
            <h4><label class="label_nb" id="nb_size_lb">Size:</label></h4>
            <span>
                <span><label class="label_nb" id="name_size2">Rows:</label></span>
                <input type="number" pattern="\d*" name="nb_size2" id="nb_size2" value="10" min="1" max="100" step="1">
                <span><label class="label_nb" id="name_size1">Columns:</label></span>
                <input type="number" pattern="\d*" name="nb_size1" id="nb_size1" value="10" min="1" max="100" step="1">
                <span><label class="label_nb" id="nb_sudoku1_lb">Diagonal &#x27CD;</label></span>
                <input type="checkbox" name="nb_sudoku1" id="nb_sudoku1">
                <span><label class="label_nb" id="nb_sudoku4_lb">Diagonal &#x27CB;</label></span>
                <input type="checkbox" name="nb_sudoku4" id="nb_sudoku4">
                <br>
                <span><label class="label_nb" id="nb_sudoku2_lb">Outside clues</label></span>
                <input type="checkbox" name="nb_sudoku2" id="nb_sudoku2">
                <span><label class="label_nb" id="nb_sudoku3_lb">Outside clues (top/left)</label></span>
                <input type="checkbox" name="nb_sudoku3" id="nb_sudoku3">
                <br>
                <span><label class="label_nb" id="nb_sudoku8_lb">Size 4x4</label></span>
                <input type="checkbox" name="nb_sudoku8" id="nb_sudoku8">
                <span><label class="label_nb" id="nb_sudoku5_lb">Size 6x6</label></span>
                <input type="checkbox" name="nb_sudoku5" id="nb_sudoku5">
                <span><label class="label_nb" id="nb_sudoku6_lb">Size 8x8</label></span>
                <input type="checkbox" name="nb_sudoku6" id="nb_sudoku6">
                <br>
                <span><label class="label_nb" id="nb_sudoku7_lb"></label></span>
            </span>
            <br>
            <h4><label class="label_nb" id="nb_space_lb">White space:</label></h4>
            <!--Mode Setting-->
            <span id="modal-spaceud" style="display:inline;">
                <span><label class="label_nb" id="name_space1">Over:</label></span>
                <input type="number" pattern="\d*" name="nb_space1" id="nb_space1" value="0" min="0" max="20" step="1">
                <span><label class="label_nb" id="name_space2">Under</label></span>
                <input type="number" pattern="\d*" name="nb_space2" id="nb_space2" value="0" min="0" max="20" step="1">
            </span>
            <br>
            <h4><label class="label_nb">　　　</label></h4>
            <span id="modal-spacelr" style="display:inline;">
                <span><label class="label_nb" id="name_space3">Left:</label></span>
                <input type="number" pattern="\d*" name="nb_space3" id="nb_space3" value="0" min="0" max="20" step="1">
                <span><label class="label_nb" id="name_space4">Right:</label></span>
                <input type="number" pattern="\d*" name="nb_space4" id="nb_space4" value="0" min="0" max="20" step="1">
            </span>
            <br>
            <hr size=1 noshade class="newgridhrline">
            <h5><label id="nb_note">*Update display* button only affects the following properties:</label></h5>
            <br>
            <h4><label class="label_nb">Display size:</label></h4>
            <span id="">
                <input type="number" pattern="\d*" name="nb_size3" id="nb_size3" value="38" min="12" max="90" step="2">
            </span>
            <br>
            <h4><label class="label_nb" id="nb_grid_lb">Gridlines:</label></h4>
            <input type="radio" name="nb_grid" value="1" id="nb_grid1" checked="checked">
            <label for="nb_grid1" class="label" id="nb_grid1_lb">Solid line</label>
            <input type="radio" name="nb_grid" value="2" id="nb_grid2">
            <label for="nb_grid2" class="label" id="nb_grid2_lb">Dotted line</label>
            <input type="radio" name="nb_grid" value="3" id="nb_grid3">
            <label for="nb_grid3" class="label" id="nb_grid3_lb">None</label>
            <br>
            <h4><label class="label_nb" id="nb_lat_lb">Gridpoints:</label></h4>
            <input type="radio" name="nb_lat" value="1" id="nb_lat1">
            <label for="nb_lat1" class="label" id="nb_lat1_lb">Yes</label>
            <input type="radio" name="nb_lat" value="2" id="nb_lat2" checked="checked">
            <label for="nb_lat2" class="label" id="nb_lat2_lb">No</label>
            <br>
            <h4><label class="label_nb" id="nb_out_lb">Outside frame:</label></h4>
            <input type="radio" name="nb_out" value="1" id="nb_out1" checked="checked">
            <label for="nb_out1" class="label" id="nb_out1_lb">Yes</label>
            <input type="radio" name="nb_out" value="2" id="nb_out2">
            <label for="nb_out2" class="label" id="nb_out2_lb">No</label>
            <br><br>
            <div class="nb_button">
                <input type="button" id="closeBtn_nb1" value="New grid" />
                <input type="button" id="closeBtn_nb2" value="Update display" />
                <input type="button" id="closeBtn_nb3" value="Close" />
            </div>
        </div>
    </div>
    <div id="modal-newsize" class="modal">
        <div id="modal-newsize-content" class="modal-content">
            <h3 class="modal-header" id="modal-newsize_lb">Resize</h3>
            <span id="modal-sizeA">
                <span><label class="label_nb" id="modal-newsize_size_lb">Display size:</label></span>
                <input type="number" pattern="\d*" name="nb_size3_r" id="nb_size3_r" value="38" min="12" max="90" step="2">
            </span>
            <br>
            <div class="nb_button">
                <input type="button" id="closeBtn_size1" value="Apply changes" />
                <input type="button" id="closeBtn_size2" value="Close" />
            </div>
            <br>
            <div class="nb_button">
                <h4><label id="rt4_lb_r">Add/Remove Rows/Columns:</label></h4>
                <p><label id="rt5_lb_r">*Works only in Square Board Type.</label></p>
                <div class="resize-grid-buttons">
                    <div class="existing-grid">Existing Grid</div>
                    <button class="addtop" id="rt_addtop_r">+ &#9650;</button>
                    <button class="subtop" id="rt_subtop_r">&ndash; &#9660;</button>
                    <button class="addleft" id="rt_addleft_r">+ &#9664;</button>
                    <button class="subleft" id="rt_subleft_r">&ndash; &#9654;</button>
                    <button class="addright" id="rt_addright_r">+ &#9654;</button>
                    <button class="subright" id="rt_subright_r">&ndash; &#9664;</button>
                    <button class="addbottom" id="rt_addbottom_r">+ &#9660;</button>
                    <button class="subbottom" id="rt_subbottom_r">&ndash; &#9650;</button>
                </div>
            </div>
        </div>
    </div>
    <div id="modal-bg-image" class="modal">
        <div id="modal-bg-image-content" class="modal-content">
            <h3 class="modal-header">Set Background Image</h3>
            <div>
                <table style="width: 100%">
                    <colgroup>
                        <col width="50%" />
                        <col width="50%" />
                    </colgroup>
                    <tr>
                        <td colspan="2">Image URL:</td>
                    </tr>
                    <tr>
                        <td colspan="2"><input type="text" id="bg_image_url"/> </td>
                    </tr>
                    <tr>
                        <td>X position:</td>
                        <td><input type="text" value="0" id="bg_image_x"/></td>
                    </tr>
                    <tr>
                        <td>Y position:</td>
                        <td><input type="text" value="0" id="bg_image_y"/></td>
                    </tr>
                    <tr>
                        <td>Width:</td>
                        <td><input type="text" id="bg_image_width"/></td>
                    </tr>
                    <tr>
                        <td>Height:</td>
                        <td><input type="text" id="bg_image_height"/></td>
                    </tr>
                    <tr>
                        <td>Opacity:</td>
                        <td><input type="text" value="100" id="bg_image_opacity"/></td>
                    </tr>
                    <tr>
                        <td>Draw in foreground:</td>
                        <td><input type="checkbox" id="bg_image_foreground"/></td>
                    </tr>
                    <tr>
                        <td>Mask out white from image:</td>
                        <td><input type="checkbox" id="bg_image_mask_white"/></td>
                    </tr>
                    <tr>
                        <td>White mask threshold:</td>
                        <td><input type="text" value="240" id="bg_image_threshold"/></td>
                    </tr>
                </table>
            </div>
            <br>
            <div class="nb_button">
                <input type="button" id="closeBtn_bg_image" value="Close" />
            </div>
        </div>
    </div>
    <div id="modal-image" class="modal">
        <div id="modal-image-content">
            <h3 class="modal-header" id="saveimagetitle">Save screenshot</h3>
            <div id="modal-image-body">
                <h4><label class="label_imagespace" id="nb_margin_lb">White border:</label></h4>
                <input type="radio" name="nb_margin" value="1" id="nb_margin1" checked="checked">
                <label for="nb_margin1" class="label" id="nb_margin1_lb">Yes</label>
                <input type="radio" name="nb_margin" value="2" id="nb_margin2">
                <label for="nb_margin2" class="label" id="nb_margin2_lb">No</label>
                <br>
                <h4><label class="label_imagespace" id="nb_quality_lb">Image quality:</label></h4>
                <input type="radio" name="nb_quality" value="1" id="nb_quality1" checked="checked">
                <label for="nb_quality1" class="label" id="nb_quality1_lb">High</label>
                <input type="radio" name="nb_quality" value="2" id="nb_quality2">
                <label for="nb_quality2" class="label" id="nb_quality2_lb">Low</label>
                <br>
                <h4><label class="label_imagespace" id="nb_type_lb">File Type:</label></h4>
                <input type="radio" name="nb_type" value="1" id="nb_type1" checked="checked">
                <label for="nb_type1" class="label" id="nb_type1_lb">png</label>
                <input type="radio" name="nb_type" value="2" id="nb_type2">
                <label for="nb_type2" class="label" id="nb_type2_lb">jpeg</label>
                <input type="radio" name="nb_type" value="3" id="nb_type3">
                <label for="nb_type3" class="label" id="nb_type3_lb">svg</label>
                <br>
                <h4><label class="label_imagespace" id="nb_title_lb">Title &amp; Author:</label></h4>
                <input type="radio" name="nb_title" value="1" id="nb_title1">
                <label for="nb_title1" class="label" id="nb_title1_lb">Yes</label>
                <input type="radio" name="nb_title" value="2" id="nb_title2" checked="checked">
                <label for="nb_title2" class="label" id="nb_title2_lb">No</label>
                <br>
                <h4><label class="label_imagespace" id="nb_rules_lb">Rules:</label></h4>
                <input type="radio" name="nb_rules" value="1" id="nb_rules1">
                <label for="nb_rules1" class="label" id="nb_rules1_lb">Yes</label>
                <input type="radio" name="nb_rules" value="2" id="nb_rules2" checked="checked">
                <label for="nb_rules2" class="label" id="nb_rules2_lb">No</label>
                <br><br>
                <span id="saveimagename_lb">File name:<input type="text" placeholder="sample_name" id="saveimagename"></span>
            </div>
            <br>
            <div class="nb_button">
                <input type="button" id="closeBtn_image1" value="Open in new window" onclick="saveimage_window();" />
                <input type="button" id="closeBtn_image2" value="Download" />
                <input type="button" id="closeBtn_image3" value="Close" />
            </div>
        </div>
    </div>
    <div id="modal-rotate" class="modal">
        <div id="modal-rotate-content" class="modal-content">
            <h3 class="modal-header" id="savetexttitle">Rotate / Move / Add / Remove</h3>
            <div class="nb_button">
                <h4><label id="rt1_lb">Rotate:</label></h4>
                <input type="button" id="rt_left" value="&larr;" />
                <input type="button" id="rt_right" value="&rarr;" />
            </div>
            <div class="nb_button">
                <h4><label id="rt2_lb">Flip:</label></h4>
                <input type="button" id="rt_LR" value="&harr;" />
                <input type="button" id="rt_UD" value="&#8597;" />
            </div>
            <br>
            <div class="nb_button">
                <h4><label id="rt3_lb">Move:</label></h4>
                <br>
                <input type="button" id="rt_center" value="Move board to center" /><br>
                <input type="button" id="rt_size" value="Fit window to board" /><br>
                <input type="button" id="rt_reset" value="Reset" />
            </div>
            <br>
            <div class="nb_button">
                <h4><label id="rt4_lb">Add/Remove Rows/Columns:</label></h4>
                <p><label id="rt5_lb">*Works only in Square Board Type.</label></p>
                <div class="resize-grid-buttons">
                    <div class="existing-grid">Existing Grid</div>
                    <button class="addtop" id="rt_addtop">+ &#9650;</button>
                    <button class="subtop" id="rt_subtop">&ndash; &#9660;</button>
                    <button class="addleft" id="rt_addleft">+ &#9664;</button>
                    <button class="subleft" id="rt_subleft">&ndash; &#9654;</button>
                    <button class="addright" id="rt_addright">+ &#9654;</button>
                    <button class="subright" id="rt_subright">&ndash; &#9664;</button>
                    <button class="addbottom" id="rt_addbottom">+ &#9660;</button>
                    <button class="subbottom" id="rt_subbottom">&ndash; &#9650;</button>
                </div>
            </div>
            <br>
            <div class="nb_button">
                <input type="button" id="closeBtn_rotate1" value="Close" />
            </div>
        </div>
    </div>
    <div id="modal-save" class="modal">
        <div id="modal-save-content">
            <h3 class="modal-header" id="savetexttitle">Share Puzzle</h3>
            <h5 class="modal-subheader">Puzzle Information</h5>
            <div id="modal-save-info">
                <span class="DM">Title:<input type="text" placeholder="e.g. Thermo Sudoku or Yajilin" value=""
                    id="saveinfotitle" class="right" onchange="update_title()"></span>
                <br>
                <span class="DM">Author:<input type="text" placeholder="Puzzle creator name" value=""
                    id="saveinfoauthor" onchange="update_title()"></span>
                <br>
                <span class="DM">Rules:<textarea class="text_area" rows="1" cols="10" placeholder="e.g. Classic sudoku rules." value="" id="saveinforules"></textarea></span>
                <br>
                <input type="button" id="saveinfogenre" value="Select Genre/Tags (Optional)" />
                <br>
                <span class="DM">
                    Source:
                    <span id="sourcewarning">* If you are not the author of the puzzle, please specify the source URL</span>
                    <input type="text" placeholder="https://example.com" id="saveinfosource"></span>
            </div>
            <h5 class="modal-subheader">Generate URL</h5>
            <div class="modal-save-inset">
                <label class="label_nb" for="save_undo" id="save_undo_lb">Save Undo/Redo (History)</label>
                <input type="checkbox" name="save_undo" id="save_undo"><br />
                <label class="label_nb" for="auto_shorten_chk" id="auto_shorten_chk_lb">Automatically Shorten with TinyURL</label>
                <input type="checkbox" name="auto_shorten_chk" id="auto_shorten_chk" />
            </div>
            <div class="nb_button">
                <input type="button" id="address_edit" value="Editing URL" />
                <input type="button" id="address_solve" value="Solving URL" />
                <input type="button" id="address_clone" value="Clone URL" />
                <!--For Competitive Solving-->
                <input type="button" id="address_comp" value="Contest-Mode URL" />
                <input type="button" id="expansion_replay" value="Replay URL" style="display:none;" /> <br />
                <input type="button" id="expansion" value="URL with Answer Check / Advanced Options" />
            </div>
            <div id="modal-save-body">
                <textarea class="text_area" readonly rows="1" cols="50" id="savetextarea"></textarea>
                <span class="DM">Filename:<input type="text" placeholder="sample.txt" id="savetextname"></span>
            </div>
            <div class="nb_button">
                <input type="button" id="closeBtn_save1" value="Copy" />
                <input type="button" id="closeBtn_save2" value="Download" />
                <input type="button" id="closeBtn_save3" value="Open" onclick="savetext_window();" />
                <input type="button" id="closeBtn_save6" value="Shorten" onclick="shorturl_tab();" />
                <input type="button" id="closeBtn_save4" value="Close" />
            </div>
        </div>
    </div>
    <div id="modal-save-tag" class="modal">
        <div id="modal-save-tag-content">
            <h3 class="modal-header" id="save7texttitle">Add/Remove Genre Tags</h3>
            <div id="modal-save-tag-body">
                <select name="genre_tags" id="genre_tags_opt" multiple="multiple"> </select>
            </div>
        </div>
    </div>
    <div id="modal-save2" class="modal">
        <div id="modal-save2-content" class="modal-content">
            <h3 class="modal-header">Extended Output</h3>
            <div class="nb_button">
                <input type="button" id="solution_open" value="Answer check" />
                <input type="button" id="pp_file_open" style="margin-top: 5px;" value="puzzle_output_file" />
            </div>
            <div id="modal-save2-solution">
                <h3 id="save3texttitle">Solution will check for the following:</h3>
                <div class="nb_button">
                    <div>
                        <input type="radio" name="constraints" value="and" id=and_tmp checked="checked" />
                        <label for="and_tmp_lb" class="label" id="and_tmp_lb">All constraints</label>
                        <input type="radio" name="constraints" value="or" id="or_tmp" />
                        <label for="or_tmp_lb" class="label" id="or_tmp_lb">Any of the constraints</label>
                    </div>
                    <table id="answersetting">
                        <tr>
                            <td>
                                <span><label id="sol_surface_exact_lb">Surface - Match exact colors:</label></span>
                            </td>
                            <td class="solcheck_show_and">
                                <input type="checkbox" name="solution" id="sol_surface_exact" class="solcheck">
                            </td>
                            <td class="solcheck_show_or">
                                <input type="checkbox" name="solution" id="sol_or_surface_exact" class="solcheck_or">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span><label id="sol_surface_lb">Shading - DG (Dark Grey), GR, LG, BL (Black):</label></span>
                            </td>
                            <td class="solcheck_show_and">
                                <input type="checkbox" name="solution" id="sol_surface" class="solcheck">
                            </td>
                            <td class="solcheck_show_or">
                                <input type="checkbox" name="solution_or" id="sol_or_surface" class="solcheck_or">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span><label id="sol_number_lb">Number - Normal, L, M, S - Green, Blue, Red <br> Sudoku - Normal, Centre - Green, Blue, Red:</label></span>
                            </td>
                            <td class="solcheck_show_and">
                                <input type="checkbox" name="solution" id="sol_number" class="solcheck">
                            </td>
                            <td class="solcheck_show_or">
                                <input type="checkbox" name="solution_or" id="sol_or_number" class="solcheck_or">
                            </td>
                        </tr>
                        <tr class="solcheck_show_and">
                            <td>
                                <span><label id="sol_loopline_exact_lb">Line - Match exact styles:</label></span>
                            </td>
                            <td>
                                <input type="checkbox" name="solution" id="sol_loopline_exact" class="solcheck">
                            </td>
                        </tr>
                        <tr class="solcheck_show_and">
                            <td>
                                <span><label id="sol_loopline_lb">Line - Green, Double only:</label></span>
                            </td>
                            <td>
                                <input type="checkbox" name="solution" id="sol_loopline" class="solcheck">
                            </td>
                        </tr>
                        <tr class="solcheck_show_and">
                            <td>
                                <span><label id="sol_ignoreloopline_lb">Line - Ignore Given Line Segments:</label></span>
                            </td>
                            <td>
                                <input type="checkbox" name="solution" id="sol_ignoreloopline" class="solcheck">
                            </td>
                        </tr>
                        <tr class="solcheck_show_or">
                            <td>
                                <span><label id="sol_loopline_exact_lb">Line - Match exact styles:</label></span>
                            </td>
                            <td>
                                <input type="checkbox" name="solution" id="sol_or_loopline_exact" class="solcheck_or">
                            </td>
                        </tr>
                        <tr class="solcheck_show_or">
                            <td>
                                <span><label id="sol_or_loopline_lb">Line - Green, Double:</label></span>
                            </td>
                            <td>
                                <input type="checkbox" name="solution_or" id="sol_or_loopline" class="solcheck_or">
                            </td>
                        </tr>
                        <tr class="solcheck_show_and">
                            <td>
                                <span><label id="sol_loopedge_exact_lb">Edge - Match exact styles:</label></span>
                            </td>
                            <td>
                                <input type="checkbox" name="solution" id="sol_loopedge_exact" class="solcheck">
                            </td>
                        </tr>
                        <tr class="solcheck_show_and">
                            <td>
                                <span><label id="sol_loopedge_lb">Edge - Green, Double:</label></span>
                            </td>
                            <td>
                                <input type="checkbox" name="solution" id="sol_loopedge" class="solcheck">
                            </td>
                        </tr>
                        <tr class="solcheck_show_and">
                            <td>
                                <span><label id="sol_ignoreborder_lb">Edge - Ignore Edges on Grid Border / Givens:</label></span>
                            </td>
                            <td>
                                <input type="checkbox" name="solution" id="sol_ignoreborder" class="solcheck">
                            </td>
                        </tr>
                        <tr class="solcheck_show_or">
                            <td>
                                <span><label id="sol_loopedge_exact_lb">Edge - Match exact styles:</label></span>
                            </td>
                            <td>
                                <input type="checkbox" name="solution" id="sol_or_loopedge_exact" class="solcheck_or">
                            </td>
                        </tr>
                        <tr class="solcheck_show_or">
                            <td>
                                <span><label id="sol_loopedge_lb">Edge - Green, Double:</label></span>
                            </td>
                            <td>
                                <input type="checkbox" name="solution_or" id="sol_or_loopedge" class="solcheck_or">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span><label id="sol_wall_lb">Wall - Green:</label></span>
                            </td>
                            <td class="solcheck_show_and">
                                <input type="checkbox" name="solution" id="sol_wall" class="solcheck">
                            </td>
                            <td class="solcheck_show_or">
                                <input type="checkbox" name="solution_or" id="sol_or_wall" class="solcheck_or">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span><label id="sol_square_lb">Shape - Shape - Square - Option 2:</label></span>
                            </td>
                            <td class="solcheck_show_and">
                                <input type="checkbox" name="solution" id="sol_square" class="solcheck">
                            </td>
                            <td class="solcheck_show_or">
                                <input type="checkbox" name="solution_or" id="sol_or_square" class="solcheck_or">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span><label id="sol_circle_lb">Shape - Shape - Circle - M size - Options 1 & 2:</label></span>
                            </td>
                            <td class="solcheck_show_and">
                                <input type="checkbox" name="solution" id="sol_circle" class="solcheck">
                            </td>
                            <td class="solcheck_show_or">
                                <input type="checkbox" name="solution_or" id="sol_or_circle" class="solcheck_or">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span><label id="sol_tri_lb">Shape - Shape - Corner triangle - Options 1 to 4:</label></span>
                            </td>
                            <td class="solcheck_show_and">
                                <input type="checkbox" name="solution" id="sol_tri" class="solcheck">
                            </td>
                            <td class="solcheck_show_or">
                                <input type="checkbox" name="solution_or" id="sol_or_tri" class="solcheck_or">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span><label id="sol_arrow_lb">Shape - Arrow - Small - Options 1 to 8:</label></span>
                            </td>
                            <td class="solcheck_show_and">
                                <input type="checkbox" name="solution" id="sol_arrow" class="solcheck">
                            </td>
                            <td class="solcheck_show_or">
                                <input type="checkbox" name="solution_or" id="sol_or_arrow" class="solcheck_or">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span><label id="sol_math_lb">Shape - Number - Math - Black, Green - Options 2 & 3:</label></span>
                            </td>
                            <td class="solcheck_show_and">
                                <input type="checkbox" name="solution" id="sol_math" class="solcheck">
                            </td>
                            <td class="solcheck_show_or">
                                <input type="checkbox" name="solution_or" id="sol_or_math" class="solcheck_or">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span><label id="sol_battleship_lb">Shape - Special 1 - Battleship - Black - Options 1 to 6 <br> and Curvy Black - Options 1 to 4:</label></span>
                            </td>
                            <td class="solcheck_show_and">
                                <input type="checkbox" name="solution" id="sol_battleship" class="solcheck">
                            </td>
                            <td class="solcheck_show_or">
                                <input type="checkbox" name="solution_or" id="sol_or_battleship" class="solcheck_or">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span><label id="sol_tent_lb">Shape - Special 1 - Tent - Option 2:</label></span>
                            </td>
                            <td class="solcheck_show_and">
                                <input type="checkbox" name="solution" id="sol_tent" class="solcheck">
                            </td>
                            <td class="solcheck_show_or">
                                <input type="checkbox" name="solution_or" id="sol_or_tent" class="solcheck_or">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span><label id="sol_star_lb">Shape - Special 1 - Star - Options 1 to 3:</label></span>
                            </td>
                            <td class="solcheck_show_and">
                                <input type="checkbox" name="solution" id="sol_star" class="solcheck">
                            </td>
                            <td class="solcheck_show_or">
                                <input type="checkbox" name="solution_or" id="sol_or_star" class="solcheck_or">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span><label id="sol_akari_lb">Shape - Special 2 - Lightbulb - Option 3:</label></span>
                            </td>
                            <td class="solcheck_show_and">
                                <input type="checkbox" name="solution" id="sol_akari" class="solcheck">
                            </td>
                            <td class="solcheck_show_or">
                                <input type="checkbox" name="solution_or" id="sol_or_akari" class="solcheck_or">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span><label id="sol_mine_lb">Shape - Special 2 - Minesweeper - Option 4:</label></span>
                            </td>
                            <td class="solcheck_show_and">
                                <input type="checkbox" name="solution" id="sol_mine" class="solcheck">
                            </td>
                            <td class="solcheck_show_or">
                                <input type="checkbox" name="solution_or" id="sol_or_mine" class="solcheck_or">
                            </td>
                        </tr>
                    </table>
                    <h5 id="save6texttitle">Custom Message</h5>
                    <textarea class="text_area" rows="1" cols="50" placeholder="Custom Congratulation Message on answer check pop up" id="custom_message"></textarea>
                    <br>
                    <input type="button" id="closeBtn_save5" value="Generate URL with answer check" />
                </div>
            </div>
            <div id="modal-save2-pp" style="display:none;">
                <h5 id="save5texttitle">Header</h5>
                <textarea class="text_area" rows="1" cols="50" placeholder="e.g. classicsudoku or cs" id="savetextarea_pp"></textarea>
                <div class="nb_button">
                    <input type="button" id="pp_file" value="pp_file output" />
                    <input type="button" id="pp_file2" value="pp_file2 output" />
                    <input type="button" id="gmp_file" value="GMPuzzle output" />
                </div>
            </div>
        </div>
    </div>
    <div id="modal-replay" class="modal">
        <div id="modal-replay-content" class="modal-content">
            <h3 class="modal-header">Share Replay</h3>
            <div id="modal-replay-solution" class="nb_button">
                <input type="text" placeholder="Solver Name" value="" id="saveinfosolver" />
                <br>
                <input type="button" id="closeBtn_replay" value="Generate URL with Replay" />
            </div>
        </div>
    </div>
    <div id="modal-input" class="modal">
        <div id="modal-input-content">
            <h3 class="modal-header" id="save4texttitle">Input/Output Sudoku String</h3>
            <div id="modal-save-body">
                <textarea class="text_area" rows="1" cols="81" id="iostring"></textarea>
            </div>
            <p id="modal-input-parameters-text">*Specify the location of the first cell of your sudoku grid and its size[optional]:</p>
            <div id="modal-input-parameters">
                <span><label class="label_nb" id="firstcell_row_lb">Row:</label></span>
                <input type="number" pattern="\d*" name="firstcell_row" id="firstcell_row" value="" min="1" max="60" step="1" placeholder="1">
                <span><label class="label_nb" id="firstcell_column_lb">Col:</label></span>
                <input type="number" pattern="\d*" name="firstcell_column" id="firstcell_column" value="" min="1" max="60" step="1" placeholder="1">
                <span><label class="label_nb" id="sudokusize_lb">Size:</label></span>
                <input type="number" pattern="\d*" name="sudokusize" id="sudokusize" value="" min="1" max="9" step="1" placeholder="9">
            </div>
            <div>
                <span><label class="label_nb" id="ignore_pencilmarks_lb" for="ignore_pencilmarks">Ignore Pencil Marks (L, M, S values)</label></span>
                <input type="checkbox" name="ignore_pencilmarks" id="ignore_pencilmarks">
            </div>
            <div>
                <span><label class="label_nb" id="sudokuIgnoreSpaces_lb" for="sudokuIgnoreSpaces">Ignore Whitespace for Import</label></span>
                <input type="checkbox" name="sudokuIgnoreSpaces" id="sudokuIgnoreSpaces">
            </div>
            <div>
                <span><label class="label_nb" id="sudokuIgnoreNotSquare_lb" for="sudokuIgnoreNotSquare">Skip Import Non-Square Check</label></span>
                <input type="checkbox" name="sudokuIgnoreNotSquare" id="sudokuIgnoreNotSquare">
            </div>
            <div id="sudokuIOFail" class="is_hidden error_msg">Error: it contains non-alpha-numeric characters</div>
            <div class="nb_button">
                <input type="button" id="load_input" value="Import Sudoku" onclick="import_sudoku();" />
                <input type="button" id="export_input" value="Export Sudoku" onclick="export_sudoku();" />
            </div>
        </div>
    </div>
    <div id="modal-load" class="modal">
        <div id="modal-load-content">
            <h3 class="modal-header" id="save6texttitle">Load URL</h3>
            <div id="modal-save-body">
                <textarea class="text_area" rows="1" cols="81" id="urlstring" value=""></textarea>
            </div>
            <div class="nb_button">
                <input type="button" id="load_url" value="Load URL" onclick="import_url();" />
            </div>
        </div>
    </div>
    <div id="modal-settings" class="modal">
        <div id="modal-settings-content" class="modal-content">
            <h3 class="modal-header" id="save7texttitle">General Settings</h3>
            <div id="modal-settings-body">
                <table id="settings-table">
                    <colgroup>
                        <col width="60%" />
                        <col width="40%" />
                    </colgroup>
                    <tbody>
                        <tr>
                            <th colspan="2" class="modal-subheader">App Display</th>
                        </tr>
                        <tr>
                            <td>
                                <label>Display Theme:</label>
                            </td>
                            <td>
                                <select name="theme_mode" id="theme_mode_opt">
                                    <option value="1" selected="selected">Light</option>
                                    <option value="2">Dark</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>Display Layout:</label>
                            </td>
                            <td>
                                <select name="responsive_settings" id="responsive_settings_opt">
                                    <option value="1" selected="selected">Classic</option>
                                    <option value="2">Flex (Tools Left)</option>
                                    <option value="3">Flex (Tools Right)</option>
                                    <option value="4">Streaming 1 (beta)</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>Timer:</label>
                            </td>
                            <td>
                                <select name="timerbar" id="timer_bar_opt">
                                    <option value="1" selected="selected">Show</option>
                                    <option value="2">Hide</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th colspan="2" class="modal-subheader">Puzzle Display</th>
                        </tr>
                        <tr>
                            <td>
                                <label>Sudoku Pencil Marks:</label>
                            </td>
                            <td>
                                <select name="sudoku_settings" id="sudoku_settings_opt">
                                    <option value="1" selected="selected">Dynamic</option>
                                    <option value="2">Large</option>
                                    <option value="3">Small</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>Sudoku Normal:</label>
                            </td>
                            <td>
                                <select name="sudoku_settings_normal" id="sudoku_settings_normal_opt">
                                    <option value="1" selected="selected">Centered</option>
                                    <option value="2">Bottom</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>Outline on Text:</label>
                            </td>
                            <td>
                                <select name="outline_text" id="outline_text_opt">
                                    <option value="1">ON</option>
                                    <option value="0" selected="selected">OFF</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>Star Battle Dots:</label>
                            </td>
                            <td>
                                <select name="starbattle_settings" id="starbattle_settings_opt">
                                    <option value="1" selected="selected">High Range</option>
                                    <option value="2">Low Range</option>
                                    <option value="3">Disable</option>
                                </select>
                            </td>
                        </tr>
                        <!-- <tr>
                            <td>
                                <h4><label id="multitab_settings_lb">Solution Tab Setting:</label></h4>
                            </td>
                            <td>
                                <select name="multitab_settings" id="multitab_settings_opt">
                                    <option value="1" selected="selected">No</option>
                                    <option value="2">Yes</option>
                                </select>
                            </td>
                        </tr> -->
                        <tr id="secondcolor_settings_lb">
                            <td>
                                <label>Surface Second Color:</label>
                            </td>
                            <td>
                                <select name="secondcolor_settings" id="secondcolor_settings_opt">
                                    <option value="1">Dark Grey</option>
                                    <option value="8">Grey</option>
                                    <option value="3">Light Grey</option>
                                    <option value="4">Black</option>
                                    <option value="2" selected="selected">Green</option>
                                    <option value="5">Blue</option>
                                    <option value="6">Red</option>
                                    <option value="7">Yellow</option>
                                    <option value="9">Pink</option>
                                    <option value="10">Orange</option>
                                    <option value="11">Purple</option>
                                    <option value="12">Brown</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th colspan="2" class="modal-subheader">Tools</th>
                        </tr>
                        <tr id="custom_color_lb">
                            <td>
                                <label>Custom Colors:</label>
                            </td>
                            <td>
                                <select name="custom_color" id="custom_color_opt">
                                    <option value="1" selected="selected">No</option>
                                    <option value="2">Yes</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>Floating Panel:</label>
                            </td>
                            <td>
                                <select name="panelbutton" id="panel_button">
                                    <option value="1">ON</option>
                                    <option value="2" selected="selected">OFF</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>Quick Panel Button:</label>
                            </td>
                            <td>
                                <select name="quickpaneldropdown" id="quick_panel_dropdown">
                                    <option value="1" selected="selected">ON</option>
                                    <option value="2">OFF</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th colspan="2" class="modal-subheader">Export</th>
                        </tr>
                        <tr>
                            <td>
                                <label>Auto-Shorten Links:</label>
                            </td>
                            <td>
                                <select id="shorten_links_dropdown">
                                    <option value="1">ON</option>
                                    <option value="0" selected>OFF</option>
                                </select>
                            </td>
                        </tr>
                        <!-- <tr>
                            <td>
                                <label>Draw on Edges/Corners:</label>
                            </td>
                            <td>
                                <select name="edgebutton" id="edge_button">
                                    <option value="1">ON</option>
                                    <option value="2" selected="selected">OFF</option>
                                </select>
                            </td>
                        </tr> -->
                        <!-- <tr>
                            <td>
                                <label>PenpaLite:</label>
                            </td>
                            <td>
                                <select name="advancebutton" id="advance_button">
                                    <option value="1">ON</option>
                                    <option value="2" selected="selected">OFF</option>
                                </select>
                            </td>
                        </tr> -->
                        <tr>
                            <th colspan="2" class="modal-subheader">Input Options</th>
                        </tr>
                        <tr id="mousemiddle_settings_lb">
                            <td>
                                <label>Mouse Middle Button:</label>
                            </td>
                            <td>
                                <select name="mousemiddle" id="mousemiddle_settings_opt">
                                    <option value="1" selected="selected">No</option>
                                    <option value="2">Yes</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>Reload Protection:</label>
                            </td>
                            <td>
                                <select name="reloadbutton" id="reload_button">
                                    <option value="1">ON</option>
                                    <option value="2" selected="selected">OFF</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>Conflict Detection:</label>
                            </td>
                            <td>
                                <select name="conflict_detection" id="conflict_detection_opt">
                                    <option value="1" selected="selected">ON</option>
                                    <option value="2">OFF (this puzzle)</option>
                                    <option value="3">OFF (all puzzles)</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>Check pencil marks:</label>
                            </td>
                            <td>
                                <select name="check_pencil_marks" id="check_pencil_marks_opt">
                                    <option value="1" selected="selected">ON</option>
                                    <option value="0">OFF</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2" class="nb_button">
                                <input type="button" id="saveinfogenre2" value="Edit tags for conflict checker" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>Any color can match green line/edge in solution:</label>
                            </td>
                            <td>
                                <select name="ignore_line_style" id="ignore_line_style_opt">
                                    <option value="1">ON</option>
                                    <option value="0" selected="selected">OFF</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>Sudoku Z/Y & XCV Keys:</label>
                            </td>
                            <td>
                                <select name="enable_shortcuts" id="enable_shortcuts_opt">
                                    <option value="1" selected="selected">ON</option>
                                    <option value="2">OFF</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th colspan="2" class="modal-subheader">Saving/Storage</th>
                        </tr>
                        <tr id="save_settings_lb">
                            <td>
                                <label>Saved Settings:</label>
                            </td>
                            <td>
                                <button id="clear_settings" onclick="UserSettings.clearSettings()">Clear cookies</button>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>Auto-save puzzle in browser history:</label>
                            </td>
                            <td>
                                <select name="auto_save_history" id="auto_save_history_opt">
                                    <option value="1">ON</option>
                                    <option value="0" selected="selected">OFF</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>Local Storage:</label>
                            </td>
                            <td>
                                <em id="local_storage_browser_message" class="is_hidden">Your browser has disabled or doesn't support local storage.</em>
                                <select id="allow_local_storage">
                                    <option value="1" selected="selected">ON</option>
                                    <option value="4">OFF</option>
                                </select>
                                <button id="clear_storage_one" onclick="clear_storage_one()">Clear this puzzle</button>
                                <button id="clear_storage_all" onclick="clear_storage_all()">Clear all</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div id="modal-keys" class="modal">
        <div id="modal-keys-content" class="modal-content modal-content-wide">
            <h3 class="modal-header">Keyboard Shortcuts</h3>
            <div class="modal-inner-wrapper">
                <div>
                    <ul>
                        <li><kbd>Ctrl</kbd> + <kbd>Z</kbd>: Undo</li>
                        <li><kbd>Ctrl</kbd> + <kbd>Y</kbd>: Redo</li>
                        <li><kbd>Ctrl</kbd> + <kbd>D</kbd>: Clone</li>
                        <li><kbd>Ctrl</kbd> + <kbd>I</kbd>: To copy the previous number/alphabet/symbol from Number mode with PANEL: ON</li>
                        <li><kbd>Ctrl</kbd> + <kbd>Space</kbd>: Delete numbers and symbols at the same time</li>
                        <li><kbd>Shift</kbd> + <kbd>Space</kbd>: Enter a space (Works in "Number" Mode => "L", "M", "S" and Long" SubMode options only)</li>
                        <li><kbd>F2</kbd>: Problem mode</li>
                        <li><kbd>F3</kbd>: Solution mode</li>
                        <li><kbd>F4</kbd>: Hide/Show Timer</li>
                        <li><kbd>Tab</kbd> or <kbd>Enter</kbd>: Cycle Input Tools</li>
                        <li><kbd>?</kbd>: Show keyboard shortcuts</li>
                    </ul>
                </div>
                <div>
                    <h5 class="modal-subheader">In Sudoku Mode</h5>
                    <ul>
                        <li><kbd>Z</kbd>: Normal Submode*</li>
                        <li><kbd>X</kbd>: Corner Submode*</li>
                        <li><kbd>C</kbd>: Centre Submode*</li>
                        <li><kbd>V</kbd>: Shading (Surface Mode)*</li>
                        <li><kbd>Shift</kbd>: For Temporary Corner Submode</li>
                        <li><kbd>Shift</kbd> + <kbd>Delete</kbd>: Deletes only corner pencil marks from the selected cells</li>
                        <li><kbd>Ctrl</kbd> - For Temporary Centre Submode / Selecting Multiple Cells/ Deselecting selected cells</li>
                        <li><kbd>Ctrl</kbd> + <kbd>Delete</kbd>: Deletes only centre pencil marks from the selected cells</li>
                        <li><kbd>Delete</kbd>: To delete all the contents of the cell</li>
                        <li><kbd>Space</kbd>: To delete only the selected submode contents. (E.g. If the cell contains both centre and corner pencil marks, and if the current submode selection is "Corner submode", the pressing Spacebar would delete only the corner pencil marks)</li>
                    </ul>
                    <p class="modal-footnote">* These can be disabled from Settings.</p>
                    <h5 class="modal-subheader">In Surface Mode</h5>
                    <p>Use number keys <kbd>0</kbd> - <kbd>9</kbd> to quickly switch between styles. For styles 11 and 12, press <kbd>1</kbd> and the second digit in quick succession.</p>
                </div>
            </div>
        </div>
    </div>
    <div id="modal-help" class="modal">
        <div id="modal-help-content" class="modal-content">
            <h3 class="modal-header">Welcome to Penpa+</h3>
            <div id="modal-help-body">
                <p>It's a web application and universal pencil puzzle editor capable of drawing many different kinds of pencil puzzles. You can download your puzzles as images and save puzzle links in the form of URLs to share with others.</p>
                <h5 class="modal-subheader">Usage</h5>
                <div class="nb_button" id="usageButtons">
                    <a class="button" onclick="show_shortcuts();">Shortcuts</a>
                    <a class="button" target="_blank" href="https://github.com/swaroopg92/penpa-edit/blob/master/README.md">Tool Instructions</a>
                    <a class="button" target="_blank" href="https://www.youtube.com/channel/UCAv0bBz7MTVJOlHzINnHhYQ/videos">Youtube Tutorials</a>
                    <a class="button" target="_blank" href="https://github.com/swaroopg92/penpa-edit/blob/master/VIDEO_TUTORIALS.md">List of Youtube Tutorials</a>
                    <a class="button" target="_blank" href="https://github.com/swaroopg92/penpa-edit/wiki/Steps-to-Create-Sudoku-or-Puzzle-in-Penpa">Steps to Create a Sudoku/Puzzle</a>
                    <a class="button" target="_blank" href="https://docs.google.com/document/d/12Mde0ogcpdtgM2nz6Z_nZYJnMJyUOMC5f3FUxzH9q74/edit">Frequently Asked Questions</a>
                    <a class="button" target="_blank" href="https://discord.gg/BbN89j5">Discord Channel</a>
                    <a class="button" target="_blank" href="javascript: (() => {let current_url = window.location.href;   if (current_url.includes('penpa-edit')){let current_url_parts = current_url.split('/penpa-edit/');   let new_url = 'https://swaroopg92.github.io/penpa-edit/'+ current_url_parts[1];   window.open(new_url);} else if (current_url.match(/\/puzz.link\/p\?|pzprxs\.vercel\.app\/p\?|\/pzv\.jp\/p(\.html)?\?/)){let new_url = 'https://swaroopg92.github.io/penpa-edit/?m=edit&p='+current_url; window.open(new_url);} else{console.log('No support exist for ->', current_url)}})();">Bookmarklet to Open Puzz.Link / PZV / pzprxs / OtherPenpaFork Puzzles in Penpa+</a>
                </div>
                <h5 class="modal-subheader">Development</h5>
                <div class="nb_button">
                    <a class="button" target="_blank" onclick="load_feedback();">Provide Feedback</a>
                    <a class="button" target="_blank" href="https://github.com/swaroopg92/penpa-edit/blob/master/CONTRIBUTING.md">Contribute to Project</a>
                    <a class="button" target="_blank" href="https://github.com/swaroopg92/penpa-edit/projects/1">Ongoing TO-DO list</a>
                    <a class="button" target="_blank" href="https://github.com/swaroopg92/penpa-edit/blob/master/CHANGELOG.md">Changelogs</a>
                    <a class="button" target="_blank" href="https://github.com/swaroopg92/penpa-edit/blob/master/CREDITS.md">Credits</a>
                    <a class="button" target="_blank" href="https://github.com/swaroopg92/penpa-edit/blob/master/LICENSE">License</a>
                </div>
                <h5 class="modal-subheader">Sudoku/Puzzle Rulesets</h5>
                <p>Note: This is by no means an exhaustive list. Penpa+ is not affiliated with these sources. Please contact respective owners for any further information.</p>
                <div class="nb_button">
                    <a class="button" href="https://tinyurl.com/puzzlerules" target="_blank">Eric Fox - Dictionary of Rulesets</a>
                    <a class="button" href="https://wpcunofficial.miraheze.org/wiki/Category:Puzzle_Types" target="_blank">Ryotaro Chiba - WPC Puzzles</a>
                    <a class="button" href="http://logicmastersindia.com/lmitests/dl.asp?attachmentid=669&v1" target="_blank">LMI - WSC IB (Sudoku Variants)</a>
                    <a class="button" href="http://www.puzzleduel.club/archive/types" target="_blank">Puzzle Duel Club</a>
                    <a class="button" href="http://www.logic-puzzles.ropeko.ch/php/db/search.php" target="_blank">Ropeko - Logic Puzzles List</a>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        script_sources = ["./js/libs/easytimer.min.js",
            "./js/timer.js",
            "./js/conversion.js"
        ];
        for (let i = 0; i < script_sources.length; i++) {
            let script = document.createElement("script");
            script.type = "text/javascript";
            script.src = script_sources[i] + "?v=" + ver;
            script.async = false;
            document.head.appendChild(script);
        }
        document.getElementById('version-number').innerHTML = ver;
    </script>
</body>

</html>
